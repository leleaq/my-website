<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>CRPDå°è‹±é›„å†’éšª (SVGéšæ¢¯ç‰ˆ) ğŸŒŸ</title>
    <style>
        /* --- åŸæœ‰æ¨£å¼ç¶­æŒä¸è®Š --- */
        body { 
            font-family: 'Arial Black', 'å¾®è»Ÿæ­£é»‘é«”', sans-serif; 
            background: linear-gradient(135deg, #FFD700, #87CEEB); 
            text-align: center; 
            margin: 0; padding: 10px; 
            overflow: hidden;
            animation: bgGlow 2s infinite alternate;
        }
        @keyframes bgGlow { 0% { opacity: 0.9; } 100% { opacity: 1; } }
        h1 { color: #FF4500; font-size: 32px; text-shadow: 2px 2px #FFF; margin-bottom: 10px;}
        button { 
            font-size: 24px; padding: 15px 25px; margin: 10px; 
            border-radius: 50px; background: linear-gradient(#4CAF50, #45a049); 
            color: white; border: none; box-shadow: 0 5px 10px rgba(0,0,0,0.3);
            transition: transform 0.2s; cursor: pointer;
        }
        button:active { transform: scale(0.95); }
        
        /* å¡ç‰‡æ¨£å¼ */
        .card-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            justify-content: center;
            width: 280px;
            margin: 10px auto;
        }
        .flip-card { 
            width: 120px; height: 120px; 
            background: #fff; 
            border-radius: 20px; 
            box-shadow: 0 6px 0 #bbb;
            cursor: pointer; 
            font-size: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 4px solid #fff;
            transition: transform 0.2s;
        }
        .flip-card.covered {
            background: repeating-linear-gradient(45deg, #606dbc, #606dbc 10px, #465298 10px, #465298 20px);
            font-size: 0;
        }
        .flip-card.matched {
            background: #81C784;
            border-color: #4CAF50;
            animation: popBounce 0.5s;
        }

        #game { font-size: 24px; margin: 10px auto; color: #333; line-height: 1.4; min-height: 320px; max-width: 600px; background: rgba(255,255,255,0.6); padding: 15px; border-radius: 20px; box-shadow: 0 8px 32px rgba(31, 38, 135, 0.2);}
        .star { font-size: 40px; animation: sparkle 1s infinite; }
        @keyframes sparkle { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.5); } }
        .level-title { font-size:24px; font-weight:bold; margin-bottom:15px; color: #0056b3; }
        .game-text { margin-bottom: 15px; font-weight: bold;}

        /* --- CRPD çµå°¾æ¨£å¼ --- */
        .crpd-header { font-size: 22px; color: #555; margin: 15px 0 5px; }
        .crpd-motto { display: flex; justify-content: center; flex-wrap: wrap; gap: 10px; margin-bottom: 20px; }
        .motto-word {
            font-size: 32px; font-weight: 900; padding: 5px 10px; border-radius: 10px;
            text-shadow: 2px 2px 0px #fff, -2px -2px 0px #fff, 2px -2px 0px #fff, -2px 2px 0px #fff, 3px 3px 5px rgba(0,0,0,0.2);
            display: inline-block; animation: popBounce 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
            opacity: 0; transform: scale(0.5);
        }
        .word1 { color: #FF5252; animation-delay: 0.2s; } 
        .word2 { color: #2196F3; animation-delay: 0.5s; } 
        .word3 { color: #4CAF50; animation-delay: 0.8s; } 
        .separator { font-size: 30px; color: #999; line-height: 1.5; animation: fadeIn 0.5s forwards 1s; opacity: 0;}

        @keyframes popBounce {
            0% { opacity: 0; transform: scale(0.5) translateY(20px); }
            70% { opacity: 1; transform: scale(1.2) translateY(-10px); }
            100% { opacity: 1; transform: scale(1) translateY(0); }
        }
        @keyframes fadeIn { to { opacity: 1; } }
    </style>
</head>
<body>
    <h1>ğŸ® CRPDå°è‹±é›„å†’éšª</h1>
    <img src="cover.jpg" alt="å¿«æ¨‚å°å­©" style="width:180px; height:130px; border-radius:30px; box-shadow:0 5px 15px rgba(0,0,0,0.2); object-fit: cover; background:#fff;">
    
    <div id="game">
        <p class="game-text" style="font-size: 28px;">æ­¡è¿ä¾†å…¬åœ’ç©ï¼<br>é»æ“Šç«ç®­ï¼Œæˆ‘å€‘ä¸€èµ·å‡ºç™¼å¹«åŠ©æœ‹å‹å§ï¼</p>
    </div>
    <button id="startBtn" onclick="startGame()">ğŸš€ é–‹å§‹å†’éšªï¼</button>

    <script>
        let level = 0;
        let audioContext;
        const synth = window.speechSynthesis;
        
        // ç¿»ç‰Œè®Šæ•¸
        let hasFlippedCard = false;
        let lockBoard = false;
        let firstCard, secondCard;
        let matchCount = 0;

        function speak(text) {
            if (synth.speaking) synth.cancel();
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'zh-TW'; utterance.rate = 1; utterance.pitch = 1.1;
            synth.speak(utterance);
        }

        function initAudio() {
            const AudioContext = window.AudioContext || window.webkitAudioContext;
            if (AudioContext) audioContext = new AudioContext();
        }

        function playSuccess() { 
            if (!audioContext) return;
            const o = audioContext.createOscillator(); const g = audioContext.createGain();
            o.connect(g); g.connect(audioContext.destination);
            o.frequency.setValueAtTime(800, audioContext.currentTime);
            o.frequency.linearRampToValueAtTime(1200, audioContext.currentTime + 0.1);
            g.gain.setValueAtTime(0.3, audioContext.currentTime);
            g.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
            o.start(); o.stop(audioContext.currentTime + 0.3);
        }
        function playClap() { playSuccess(); setTimeout(playSuccess, 150); }
        function playOops() { 
            if (!audioContext) return;
            const o = audioContext.createOscillator(); const g = audioContext.createGain();
            o.connect(g); g.connect(audioContext.destination);
            o.frequency.setValueAtTime(400, audioContext.currentTime);
            o.frequency.linearRampToValueAtTime(200, audioContext.currentTime + 0.2);
            g.gain.setValueAtTime(0.2, audioContext.currentTime);
            g.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.4);
            o.start(); o.stop(audioContext.currentTime + 0.4);
        }

        // --- éŠæˆ²é‚è¼¯ ---

        function startGame() {
            initAudio();
            if (audioContext && audioContext.state === 'suspended') audioContext.resume();
            
            document.getElementById('startBtn').style.display = 'none';
            level = 1;
            playSuccess();
            speak("ç¬¬ä¸€é—œï¼šå¹³ç­‰æ¬Šåˆ©ã€‚è«‹ç¿»é–‹å¡ç‰‡ï¼Œæ‰¾å‡ºå…©å°å¥½æœ‹å‹ï¼Œè®“å¤§å®¶ä¸€èµ·ç©ï¼");

            const cardData = [
                { id: 'pair1', icon: 'ğŸ§‘â€ğŸ¦½' },
                { id: 'pair1', icon: 'ğŸ§‘â€ğŸ¦½' },
                { id: 'pair2', icon: 'ğŸ¤' },
                { id: 'pair2', icon: 'ğŸ¤' }
            ];
            cardData.sort(() => 0.5 - Math.random());

            let gridHtml = '';
            cardData.forEach((card) => {
                gridHtml += `
                <div class="flip-card covered" data-framework="${card.id}" onclick="flipCard(this)">
                    ${card.icon}
                </div>`;
            });

            document.getElementById('game').innerHTML = `
                <div class="level-title">é—œå¡1: å¹³ç­‰æ¬Šåˆ© ğŸ§©</div>
                <div class="card-grid">
                    ${gridHtml}
                </div>
                <p class="game-text">é»æ“Šå¡ç‰‡ç¿»é–‹ï¼Œæ‰¾å‡ºä¸€æ¨£çš„ï¼</p>
            `;
            
            hasFlippedCard = false; lockBoard = false; firstCard = null; secondCard = null; matchCount = 0;
        }

        function flipCard(card) {
            if (lockBoard) return;
            if (card === firstCard) return;
            if (card.classList.contains('matched')) return;

            card.classList.remove('covered');
            
            if (!hasFlippedCard) {
                hasFlippedCard = true; firstCard = card; return;
            }
            secondCard = card;
            checkForMatch();
        }

        function checkForMatch() {
            let isMatch = firstCard.dataset.framework === secondCard.dataset.framework;
            isMatch ? disableCards() : unflipCards();
        }

        function disableCards() {
            playSuccess();
            firstCard.classList.add('matched'); secondCard.classList.add('matched');
            resetBoard();
            matchCount++;
            if (matchCount === 2) {
                setTimeout(startLevel2, 1000);
            }
        }

        function unflipCards() {
            lockBoard = true;
            playOops();
            setTimeout(() => {
                firstCard.classList.add('covered'); secondCard.classList.add('covered');
                resetBoard();
            }, 1000);
        }

        function resetBoard() {
            [hasFlippedCard, lockBoard] = [false, false];
            [firstCard, secondCard] = [null, null];
        }

        // --- ç¬¬äºŒé—œ (SVG éšæ¢¯ç‰ˆ) ---
        function startLevel2() {
            level = 2;
            playClap();
            speak("å¤ªæ£’äº†ï¼ç¬¬äºŒé—œï¼šç„¡éšœç¤™ç’°å¢ƒã€‚å“å‘€ï¼æœ‰å°éšï¼Œè¼ªæ¤…ä¸Šä¸å»ï¼æˆ‘å€‘è©²æ€éº¼è¾¦å‘¢ï¼Ÿ");
            
            document.getElementById('game').innerHTML = `
                <div class="level-title">é—œå¡2: ç„¡éšœç¤™ç’°å¢ƒ ğŸ›¤ï¸</div>
                
                <div style="display:flex; justify-content:center; align-items:flex-end; height:120px; margin:20px auto; width: fit-content;">
                    <span style="font-size:70px; margin-right: -10px; z-index: 2;">ğŸ§‘â€ğŸ¦½</span>
                    
                    <svg width="100" height="100" viewBox="0 0 100 100">
                        <path d="M5 95 L30 95 L30 70 L55 70 L55 45 L80 45 L80 20 L95 20" 
                              fill="none" stroke="#8B4513" stroke-width="8" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M0 95 L100 95" stroke="#4CAF50" stroke-width="4" />
                    </svg>
                </div>

                <p class="game-text">æœ‰å°éšï¼Œè¼ªæ¤…ä¸Šä¸å»ï¼æ€éº¼è¾¦ï¼Ÿ</p>
                <div>
                    <button onclick="pass2()">âœ… åŠ å€‹å¡é“</button>
                    <button onclick="playOops(); speak('ä¸å°å–”ï¼Œå†æƒ³æƒ³ï¼CRPDç²¾ç¥æ˜¯éœ€è¦å¡é“çš„ï¼');" style="background:#FF9800;">âŒ è·³éå»</button>
                </div>
            `;
        }

        // --- ç¬¬ä¸‰é—œ (æ›´æ–°ï¼šæ–‘é¦¬ç·šå ´æ™¯ + é›™é¸é …) ---
        function pass2() {
            playClap();
            setTimeout(() => {
                level = 3;
                speak("ç¬¬ä¸‰é—œï¼šå‹å–„å¹«åŠ©ã€‚çœ‹åˆ°æœ‹å‹åœ¨éé¦¬è·¯æ™‚é‡åˆ°å›°é›£ï¼Œæˆ‘å€‘æ‡‰è©²æ€éº¼åšå‘¢ï¼Ÿ");
                document.getElementById('game').innerHTML = `
                    <div class="level-title">é—œå¡3: å‹å–„å¹«åŠ© ğŸ¤</div>
                    
                    <div style="display:flex; justify-content:center; position:relative; height:140px; margin:10px auto; width: 260px;">
                        
                        <svg width="60" height="120" style="position: absolute; right: 0; top: 0;">
                            <rect x="28" y="50" width="6" height="70" fill="#777" />
                            <rect x="20" y="0" width="22" height="50" rx="5" fill="#333" />
                            
                            <circle cx="31" cy="15" r="7" fill="#FF5252">
                                <animate attributeName="opacity" values="1;0.4;1" dur="1s" repeatCount="indefinite" />
                            </circle>
                            
                            <circle cx="31" cy="35" r="7" fill="#222" /> 
                        </svg>

                        <svg width="260" height="50" style="position: absolute; bottom: 0; left: 0;">
                            <rect width="260" height="50" fill="#607D8B" rx="5"/>
                            <path d="M20 5 L40 5 L35 45 L15 45 Z" fill="white" opacity="0.9" />
                            <path d="M60 5 L80 5 L75 45 L55 45 Z" fill="white" opacity="0.9" />
                            <path d="M100 5 L120 5 L115 45 L95 45 Z" fill="white" opacity="0.9" />
                            <path d="M140 5 L160 5 L155 45 L135 45 Z" fill="white" opacity="0.9" />
                        </svg>

                        <div style="font-size:70px; position:absolute; bottom:15px; left:20px; z-index:2;">ğŸ§‘â€ğŸ¦½</div>
                    </div>

                    <p class="game-text">æœ‹å‹åœ¨è·¯å£ç­‰ç´…ç‡ˆï¼Œå¥½åƒéœ€è¦å¹«å¿™ï¼Ÿ</p>
                    
                    <div style="display:flex; flex-direction:column; align-items:center;">
                        <button onclick="win()">ğŸŒŸ å…ˆå•ï¼šã€Œéœ€è¦å¹«å¿™å—ï¼Ÿã€</button>
                        
                        <button onclick="playOops(); speak('å“å‘€ï¼é›–ç„¶æ˜¯å¥½å¿ƒï¼Œä½†è¦å…ˆå°Šé‡å°æ–¹æ„é¡˜ï¼Œä¸èƒ½éš¨ä¾¿å‹•åˆ¥äººçš„è¼ªæ¤…å–”ï¼');" style="background:#FF9800;">
                            âŒ ç›´æ¥æ¨ä»–èµ°
                        </button>
                    </div>
                `;
            }, 800);
        }

        function win() {
            playClap();
            speak("å¤ªæ£’äº†ï¼ä½ é€šéäº†æ‰€æœ‰è€ƒé©—ï¼Œä½ å°±æ˜¯æœ€æ£’çš„ CRPD å°è‹±é›„ï¼");

            document.getElementById('game').innerHTML = `
                <div class="star" style="margin-bottom:-10px;">â­â­â­</div>
                <h2 style="color:#2E8B57; margin: 10px 0;">ğŸ‰ ä»»å‹™å®Œæˆï¼</h2>
                <div style="font-size:80px;">ğŸ†</div>
                
                <h3 class="crpd-header">âœ¨ CRPD å°è‹±é›„ç²¾ç¥ âœ¨</h3>
                <div class="crpd-motto">
                    <span class="motto-word word1">å¹³ç­‰</span>
                    <span class="separator">Â·</span>
                    <span class="motto-word word2">ç„¡éšœç¤™</span>
                    <span class="separator">Â·</span>
                    <span class="motto-word word3">äº’ç›¸å¹«åŠ©</span>
                </div>

                <button onclick="startGame()" style="margin-top: 5px; font-size: 22px;">ğŸ”„ å†ç©ä¸€æ¬¡</button>
            `;
            document.getElementById('startBtn').style.display = 'inline-block';
            document.getElementById('startBtn').innerText = "ğŸ”„ é‡æ–°é–‹å§‹";
            document.getElementById('startBtn').onclick = startGame;
        }
    </script>
</body>
</html>
