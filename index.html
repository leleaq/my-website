<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>CRPDå°è‹±é›„å†’éšª (ç¿»ç‰ŒæŒ‘æˆ°ç‰ˆ) ğŸŒŸ</title>
    <style>
        /* --- åŸæœ‰æ¨£å¼ç¶­æŒä¸è®Š --- */
        body { 
            font-family: 'Arial Black', 'å¾®è»Ÿæ­£é»‘é«”', sans-serif; 
            background: linear-gradient(135deg, #FFD700, #87CEEB); 
            text-align: center; 
            margin: 0; padding: 10px; 
            overflow: hidden;
            animation: bgGlow 2s infinite alternate;
        }
        @keyframes bgGlow { 0% { opacity: 0.9; } 100% { opacity: 1; } }
        h1 { color: #FF4500; font-size: 32px; text-shadow: 2px 2px #FFF; margin-bottom: 10px;}
        button { 
            font-size: 24px; padding: 15px 25px; margin: 10px; 
            border-radius: 50px; background: linear-gradient(#4CAF50, #45a049); 
            color: white; border: none; box-shadow: 0 5px 10px rgba(0,0,0,0.3);
            transition: transform 0.2s; cursor: pointer;
        }
        button:active { transform: scale(0.95); }
        
        /* ä¿®æ”¹å¡ç‰‡æ¨£å¼ä»¥é©æ‡‰ç¿»ç‰ŒéŠæˆ² */
        .card-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            justify-content: center;
            width: 280px;
            margin: 10px auto;
        }
        .flip-card { 
            width: 120px; height: 120px; 
            background: #fff; 
            border-radius: 20px; 
            box-shadow: 0 6px 0 #bbb;
            cursor: pointer; 
            font-size: 60px; /* Emoji å¤§å° */
            display: flex;
            align-items: center;
            justify-content: center;
            border: 4px solid #fff;
            transition: transform 0.2s;
        }
        .flip-card.covered {
            background: repeating-linear-gradient(
              45deg,
              #606dbc,
              #606dbc 10px,
              #465298 10px,
              #465298 20px
            );
            font-size: 0; /* è“‹èµ·ä¾†æ™‚éš±è— Emoji */
        }
        .flip-card.matched {
            background: #81C784;
            border-color: #4CAF50;
            animation: popBounce 0.5s;
        }

        img { width: 100%; height: 100%; object-fit: cover; border-radius: 20px; }
        #game { font-size: 24px; margin: 10px auto; color: #333; line-height: 1.4; min-height: 320px; max-width: 600px; background: rgba(255,255,255,0.6); padding: 15px; border-radius: 20px; box-shadow: 0 8px 32px rgba(31, 38, 135, 0.2);}
        .hidden { display: none; }
        .star { font-size: 40px; animation: sparkle 1s infinite; }
        @keyframes sparkle { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.5); } }
        .level-title { font-size:24px; font-weight:bold; margin-bottom:15px; color: #0056b3; }
        .game-text { margin-bottom: 15px; font-weight: bold;}

        /* --- çµå°¾ CRPD æ¨£å¼ --- */
        .crpd-header { font-size: 22px; color: #555; margin: 15px 0 5px; }
        .crpd-motto { display: flex; justify-content: center; flex-wrap: wrap; gap: 10px; margin-bottom: 20px; }
        .motto-word {
            font-size: 32px; font-weight: 900; padding: 5px 10px; border-radius: 10px;
            text-shadow: 2px 2px 0px #fff, -2px -2px 0px #fff, 2px -2px 0px #fff, -2px 2px 0px #fff, 3px 3px 5px rgba(0,0,0,0.2);
            display: inline-block; animation: popBounce 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
            opacity: 0; transform: scale(0.5);
        }
        .word1 { color: #FF5252; animation-delay: 0.2s; } 
        .word2 { color: #2196F3; animation-delay: 0.5s; } 
        .word3 { color: #4CAF50; animation-delay: 0.8s; } 
        .separator { font-size: 30px; color: #999; line-height: 1.5; animation: fadeIn 0.5s forwards 1s; opacity: 0;}

        @keyframes popBounce {
            0% { opacity: 0; transform: scale(0.5) translateY(20px); }
            70% { opacity: 1; transform: scale(1.2) translateY(-10px); }
            100% { opacity: 1; transform: scale(1) translateY(0); }
        }
        @keyframes fadeIn { to { opacity: 1; } }

    </style>
</head>
<body>
    <h1>ğŸ® CRPDå°è‹±é›„å†’éšª</h1>
    
    <img src="cover.jpg" alt="å¿«æ¨‚å°å­©" style="width:180px; height:130px; border-radius:30px; box-shadow:0 5px 15px rgba(0,0,0,0.2); object-fit: cover; background:#fff;">
    
    <div id="game">
        <p class="game-text" style="font-size: 28px;">æ­¡è¿ä¾†å…¬åœ’ç©ï¼<br>é»æ“Šç«ç®­ï¼Œæˆ‘å€‘ä¸€èµ·å‡ºç™¼å¹«åŠ©æœ‹å‹å§ï¼</p>
    </div>
    <button id="startBtn" onclick="startGame()">ğŸš€ é–‹å§‹å†’éšªï¼</button>

    <script>
        let level = 0;
        let audioContext;
        const synth = window.speechSynthesis;

        // ç¿»ç‰ŒéŠæˆ²è®Šæ•¸
        let hasFlippedCard = false;
        let lockBoard = false;
        let firstCard, secondCard;
        let matchCount = 0;

        function speak(text) {
            if (synth.speaking) synth.cancel();
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'zh-TW'; utterance.rate = 1; utterance.pitch = 1.1;
            synth.speak(utterance);
        }

        function initAudio() {
            const AudioContext = window.AudioContext || window.webkitAudioContext;
            if (AudioContext) audioContext = new AudioContext();
        }

        function playSuccess() { 
            if (!audioContext) return;
            const o = audioContext.createOscillator(); const g = audioContext.createGain();
            o.connect(g); g.connect(audioContext.destination);
            o.frequency.setValueAtTime(800, audioContext.currentTime);
            o.frequency.linearRampToValueAtTime(1200, audioContext.currentTime + 0.1);
            g.gain.setValueAtTime(0.3, audioContext.currentTime);
            g.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
            o.start(); o.stop(audioContext.currentTime + 0.3);
        }
        function playClap() { playSuccess(); setTimeout(playSuccess, 150); }
        function playOops() { 
            if (!audioContext) return;
            const o = audioContext.createOscillator(); const g = audioContext.createGain();
            o.connect(g); g.connect(audioContext.destination);
            o.frequency.setValueAtTime(400, audioContext.currentTime);
            o.frequency.linearRampToValueAtTime(200, audioContext.currentTime + 0.2); // å¤±æ•—éŸ³æ•ˆé™èª¿
            g.gain.setValueAtTime(0.2, audioContext.currentTime);
            g.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.4);
            o.start(); o.stop(audioContext.currentTime + 0.4);
        }

        // --- éŠæˆ²é‚è¼¯ ---

        function startGame() {
            initAudio();
            if (audioContext && audioContext.state === 'suspended') audioContext.resume();
            
            document.getElementById('startBtn').style.display = 'none'; // éš±è—é–‹å§‹æŒ‰éˆ•
            level = 1;
            playSuccess();
            speak("ç¬¬ä¸€é—œï¼šå¹³ç­‰æ¬Šåˆ©ã€‚è«‹ç¿»é–‹å¡ç‰‡ï¼Œæ‰¾å‡ºå…©å°å¥½æœ‹å‹ï¼Œè®“å¤§å®¶ä¸€èµ·ç©ï¼");

            // æº–å‚™å¡ç‰‡æ•¸æ“š (2å°)
            const cardData = [
                { id: 'pair1', icon: 'ğŸ§‘â€ğŸ¦½' }, // è¼ªæ¤…æœ‹å‹
                { id: 'pair1', icon: 'ğŸ§‘â€ğŸ¦½' },
                { id: 'pair2', icon: 'ğŸ¤' }, // æ¡æ‰‹/åˆä½œ
                { id: 'pair2', icon: 'ğŸ¤' }
            ];
            // æ´—ç‰Œ
            cardData.sort(() => 0.5 - Math.random());

            let gridHtml = '';
            cardData.forEach((card, index) => {
                gridHtml += `
                <div class="flip-card covered" data-framework="${card.id}" onclick="flipCard(this)">
                    ${card.icon}
                </div>`;
            });

            document.getElementById('game').innerHTML = `
                <div class="level-title">é—œå¡1: å¹³ç­‰æ¬Šåˆ© ğŸ§©</div>
                <div class="card-grid">
                    ${gridHtml}
                </div>
                <p class="game-text">é»æ“Šå¡ç‰‡ç¿»é–‹ï¼Œæ‰¾å‡ºä¸€æ¨£çš„ï¼</p>
            `;
            
            // é‡ç½®ç¿»ç‰Œè®Šæ•¸
            hasFlippedCard = false;
            lockBoard = false;
            firstCard = null;
            secondCard = null;
            matchCount = 0;
        }

        // ç¬¬ä¸€é—œï¼šç¿»ç‰Œé‚è¼¯
        function flipCard(card) {
            if (lockBoard) return;
            if (card === firstCard) return; // ä¸èƒ½é»åŒä¸€å¼µ
            if (card.classList.contains('matched')) return; // å·²ç¶“é…å°çš„ä¸èƒ½é»

            card.classList.remove('covered'); // ç¿»é–‹
            
            if (!hasFlippedCard) {
                // ç¬¬ä¸€æ¬¡ç¿»ç‰Œ
                hasFlippedCard = true;
                firstCard = card;
                return;
            }

            // ç¬¬äºŒæ¬¡ç¿»ç‰Œ
            secondCard = card;
            checkForMatch();
        }

        function checkForMatch() {
            let isMatch = firstCard.dataset.framework === secondCard.dataset.framework;

            if (isMatch) {
                disableCards();
            } else {
                unflipCards();
            }
        }

        function disableCards() {
            playSuccess(); // é…å°æˆåŠŸéŸ³æ•ˆ
            firstCard.classList.add('matched');
            secondCard.classList.add('matched');
            
            resetBoard();
            matchCount++;

            if (matchCount === 2) {
                setTimeout(() => {
                    startLevel2();
                }, 1000);
            }
        }

        function unflipCards() {
            lockBoard = true;
            playOops(); // é…å°å¤±æ•—éŸ³æ•ˆ
            setTimeout(() => {
                firstCard.classList.add('covered');
                secondCard.classList.add('covered');
                resetBoard();
            }, 1000);
        }

        function resetBoard() {
            [hasFlippedCard, lockBoard] = [false, false];
            [firstCard, secondCard] = [null, null];
        }

        // --- ç¬¬äºŒé—œ ---
        function startLevel2() {
            level = 2;
            playClap();
            speak("å¤ªæ£’äº†ï¼ç¬¬äºŒé—œï¼šç„¡éšœç¤™ç’°å¢ƒã€‚å“å‘€ï¼æœ‰å°éšï¼Œè¼ªæ¤…ä¸Šä¸å»ï¼æˆ‘å€‘è©²æ€éº¼è¾¦å‘¢ï¼Ÿ");
            document.getElementById('game').innerHTML = `
                <div class="level-title">é—œå¡2: ç„¡éšœç¤™ç’°å¢ƒ ğŸ›¤ï¸</div>
                <div style="font-size:80px; margin:10px;">ğŸªœğŸ§‘â€ğŸ¦½</div>
                <p class="game-text">æœ‰å°éšï¼Œè¼ªæ¤…ä¸Šä¸å»ï¼æ€éº¼è¾¦ï¼Ÿ</p>
                <div>
                    <button onclick="pass2()">âœ… åŠ å€‹å¡é“</button>
                    <button onclick="playOops(); speak('ä¸å°å–”ï¼Œå†æƒ³æƒ³ï¼CRPDç²¾ç¥æ˜¯éœ€è¦å¡é“çš„ï¼');" style="background:#FF9800;">âŒ è·³éå»</button>
                </div>
            `;
        }

        function pass2() {
            playClap();
            setTimeout(() => {
                level = 3;
                speak("ç¬¬ä¸‰é—œï¼šå‹å–„å¹«åŠ©ã€‚çœ‹åˆ°éœ€è¦å¹«åŠ©çš„æœ‹å‹ï¼Œæˆ‘å€‘æ‡‰è©²æ€éº¼åšå‘¢ï¼Ÿ");
                document.getElementById('game').innerHTML = `
                    <div class="level-title">é—œå¡3: å‹å–„å¹«åŠ© ğŸ¤</div>
                    <div style="font-size:80px; margin:10px;">ğŸ‘€â“</div>
                    <br><p class="game-text">çœ‹åˆ°æœ‹å‹çœ‹èµ·ä¾†éœ€è¦å¹«å¿™ï¼Ÿ</p>
                    <button onclick="win()">ğŸŒŸ å…ˆå•ï¼šã€Œéœ€è¦å¹«å¿™å—ï¼Ÿã€</button>
                `;
            }, 800);
        }

        function win() {
            playClap();
            speak("å¤ªæ£’äº†ï¼ä½ é€šéäº†æ‰€æœ‰è€ƒé©—ï¼Œä½ å°±æ˜¯æœ€æ£’çš„ CRPD å°è‹±é›„ï¼");

            document.getElementById('game').innerHTML = `
                <div class="star" style="margin-bottom:-10px;">â­â­â­</div>
                <h2 style="color:#2E8B57; margin: 10px 0;">ğŸ‰ ä»»å‹™å®Œæˆï¼</h2>
                <div style="font-size:80px;">ğŸ†</div>
                
                <h3 class="crpd-header">âœ¨ CRPD å°è‹±é›„ç²¾ç¥ âœ¨</h3>
                <div class="crpd-motto">
                    <span class="motto-word word1">å¹³ç­‰</span>
                    <span class="separator">Â·</span>
                    <span class="motto-word word2">ç„¡éšœç¤™</span>
                    <span class="separator">Â·</span>
                    <span class="motto-word word3">äº’ç›¸å¹«åŠ©</span>
                </div>

                <button onclick="startGame()" style="margin-top: 5px; font-size: 22px;">ğŸ”„ å†ç©ä¸€æ¬¡</button>
            `;
            document.getElementById('startBtn').style.display = 'inline-block'; // é¡¯ç¤ºæŒ‰éˆ•ä»¥å‚™é‡ç©
            document.getElementById('startBtn').innerText = "ğŸ”„ é‡æ–°é–‹å§‹";
            document.getElementById('startBtn').onclick = startGame;
        }
    </script>
</body>
</html>
